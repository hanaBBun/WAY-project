<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{common/layouts/defaultLayout}"
	  layout:fragment="Content">
<head>
<meta charset="UTF-8">
	<title>홈페이지</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

</head>
<body>
	
	<div class="container">
		<h1>~~~ 게시물 작성 ~~~</h1>

  <main>
      <div>
        <h4 class="mb-3">게시물 작성하기</h4>
        <form class="needs-validation" method="post">
        	<div class="m-3">
        		
        		<label for="boardType" class="form-label">게시판 선택</label>
        		<select class="form-select" id="boardType" name="boardType" required>
        			<option th:if="${board.boardType == FREE}" value="FREE" selected>자유 게시판</option>
        			<option th:unless="${board.boardType == FREE}" value="FREE">자유 게시판</option>
        			<option th:if="${board.boardType == COMMUNITY}" value="COMMUNITY" selected>모임 게시판</option>
        			<option th:unless="${board.boardType == COMMUNITY}" value="COMMUNITY">모임 게시판</option>
        			<option th:if="${board.boardType == REVIEW}" value="REVIEW" selected>후기 게시판</option>
        			<option th:unless="${board.boardType == REVIEW}" value="REVIEW">후기 게시판</option>
        		</select>
        		<div class="invalid-feedback">
	              	게시판을 선택해주세요!
	            </div>
        	</div>
            <div class="m-3">
        		<lable for="boardTitle" class="form-label">제목</lable>
        		<input type="text" class="form-control" id="boardTitle" name="boardTitle" placeholder="제목을 입력해주세요" th:value="${board.boardTitle}" required>
        		<div class="invalid-feedback">
	              	제목을 입력해주세요!
	            </div>
            </div>
        	<div class="m-3">
        		<lable for="boardContent" class="form-label">본문</lable>
        		<textarea class="form-control" placeholder="내용을 입력해주세요" id="boardContent"  name="boardContent" rows="10" required>[[${board.boardContent}]]</textarea>
        		<div class="invalid-feedback">
	              	본문을 입력해주세요!
	            </div>
        	</div>
        	
        	<div class="m-3">
			  <label class="form-label">#</label>
			  <div id="tagList" class="form-control border p-2 text-break" style="min-hight: 10px; width: auto;"></div>
			</div>
			
			<div class="m-3">
				<label class="form-label">산책로 추가하기</label>
			</div>
        		
        		
        	<button class="w-100 btn btn-primary btn-lg" type="submit">수정하기</button>
        </form>
      </div>
  </main>
  	</div>

<script>
	window.onload = function(){
		
		const boardContent = document.getElementById("boardContent")
		const tagList = document.getElementById("tagList")
		let funcTag = function(){
			let str =  boardContent.value
			let arr = str.match(/(#[^\s#]+)/g)
			const set = new Set(arr)
			arr = [...set]
			let result = ""
			if(arr != null){
				arr.forEach(function(tag){
					result += " <span class='badge text-success bg-success-subtle px-2 py-1 my-1 fs-6 rounded-5'>" + tag + "</span> "
				})
				tagList.innerHTML = result
			}
		}
		funcTag()
		boardContent.addEventListener('keyup', funcTag())
	
	
	}
</script>
</body>
</html>